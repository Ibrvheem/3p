function loadJS(t,e,a){var i=document.createElement("script");i.src=t,i.onload=e,i.onreadystatechange=e,a.appendChild(i)}window.console||(console={log:function(t){}}),window.lazySizesConfig=window.lazySizesConfig||{},window.lazySizesConfig.loadMode=1,window.lazySizesConfig.expand=300,jQuery(function(t){t.fn.scrollEnd=function(e,a){t(this).scroll(function(){var i=t(this);i.data("scrollTimeout")&&clearTimeout(i.data("scrollTimeout")),i.data("scrollTimeout",setTimeout(e,a))})};var e,a,n=t(window),o=t(this),s=t("html"),r=t("body"),l=D(),d=(q(),0),f=S(),c=(A(),H(768)),h=(e=window.navigator.userAgent,((a=e.indexOf("MSIE"))>0?parseInt(e.substring(a+5,e.indexOf(".",a))):navigator.userAgent.match(/Trident\/7\./)?11:0)>0),u=0,p=0,_=r.hasClass("admin-bar")?32:0,v=.2,m=(r.hasClass("development"),!!r.hasClass("single-software")),g=!!r.hasClass("software-template-single-software-child"),w=!!r.hasClass("software-template-software-trialform"),y=!!r.hasClass("single-event"),C=!!r.hasClass("blog"),b=!!r.hasClass("single-post"),k=!!r.hasClass("page-template-template-policy"),x=r.find('header[role="banner"]');function A(){return n.innerHeight()}function S(){return n.innerWidth()}function D(){return n.scrollTop()}function H(t){var e=!1;return f<=t&&(e=!0),e}function q(){var t=null;return t=l>d?"down":"up",d=l,t}function T(e){var a=r.find('iframe[src*="vimeo.com"],iframe[data-cli-src*="youtube.com"],iframe[src*="youtube.com"],iframe[src*="wistia.net"]');a.length>0&&(a.each(function(){var e=t(this).attr("width"),a=t(this).attr("height"),i=a/e*100;"p"===t(this).parent()[0].localName&&t(this).unwrap("p"),t(this).wrap('<div class="video__wrapper" style="padding-bottom: '+i+'%" />')}),e&&e())}function M(){r.find(".megamenus").removeAttr("styles");r.find(".nav__software.desktop").length>0&&r.find(".nav__software.desktop").outerHeight();r.find("section").eq(0).css("padding-top",Math.floor(x.outerHeight()+_)),r.find(".megamenus").css("top",Math.floor(x.outerHeight()+_)),g&&r.find(".nav__software").css("top",Math.floor(x.outerHeight())),y&&(r.find("section").eq(0).css("padding-top",Math.floor(x.outerHeight()+_)),r.find(".nav__software").css("top",Math.floor(x.outerHeight())),r.find(".action__megamenus").css("top",Math.floor(x.outerHeight()+r.find(".nav__software.desktop").outerHeight()+_)))}function z(){if(b){var t=r.find(".post__social_share"),e=(S()-r.find('header[role="banner"] > .wrapper').width())/2;t.css("left",e).addClass("placed")}}function F(e,a,i){var n,o=t(e);o.find(a).css("height",""),o.each(function(){n=0,t(this).find(a).each(function(){t(this).outerHeight()>n&&(n=t(this).outerHeight())}),t(this).find(a).outerHeight(n)}),i&&i()}function I(){r.attr("data-menu","closed"),r.find('[data-state="open"]').attr("data-state","closed"),r.find(".current-clicked-item").removeClass("current-clicked-item").attr("data-state","closed")}r.find("nav > .menu-item,.actions > .menu-item").on("click",function(e){var a,i,n,o,s,l,d=t(this).find("a").attr("rel");t(this).closest("nav").find("#"+d).length>0&&(a=e,i=t(this),n="#"+i.find("a").attr("rel"),o=r.find(n),s=o.closest(".megamenus"),l=o.closest(".nav__software"),o&&("open"!==i.attr("data-state")?(I(),r.attr("data-menu","open"),i.attr("data-state","open").addClass("current-clicked-item"),s.attr("data-state","open"),o.attr("data-state","open"),l.length>0&&l.attr("data-state","open"),a.preventDefault()):"#"===i.find("a").attr("href")&&(I(),a.preventDefault()))),F(".software .megamenu-items",".subtitle",function(){})}),r.on("mouseleave",'.megamenus[data-state="open"]',I);var O=new TimelineMax;(O.to(['a[rel="menu"] > span:first-child','a[rel="menu"] > span:last-child'],.1,{top:"50%"}),O.to('a[rel="menu"] > span:nth-child(2)',v,{autoAlpha:0}),O.to('a[rel="menu"] > span:first-child',.1,{rotation:45}),O.to('a[rel="menu"] > span:last-child',.1,{rotation:-45},"-=0.1"),O.pause(),t('a[rel="menu"]').on("click",function(e){var a,i=t(this).attr("data-state"),n=t(this).attr("href");return"open"!==i?(a="open",t(this).attr("data-state",a),t(n).attr("data-state",a),"#nav__mobile"===n?O.play():(l<p&&t(n).closest(".nav__software.mobile").addClass("fixed"),TweenMax.to(t(this).find(".icon"),v,{rotate:-180})),o.trigger("menu_open")):(a="closed",t(this).attr("data-state",a),t(n).attr("data-state",a),"#nav__mobile"===n?O.reverse():(l<p&&t(n).closest(".nav__software.mobile").removeClass("fixed"),TweenMax.to(t(this).find(".icon"),v,{rotate:0})),o.trigger("menu_closed")),!1}),o.on("menu_open",function(){r.addClass("noscroll").attr("data-menu","open"),t("header").attr("data-state","")}),o.on("menu_closed",function(){r.removeClass("noscroll").attr("data-menu","closed")}),$rows=r.find(".row__title,.row__items-title"),$rows.on("click",function(e){var a=t(this);"closed"==a.closest(".row__items-group,.row").attr("data-state")?a.closest(".row__items-group,.row").attr("data-state","open"):a.closest(".row__items-group,.row").attr("data-state","closed"),e.preventDefault()}),r.find(".layout__accordeon_advanced").length>0)&&(r.find(".layout__accordeon_advanced .row__item-text .row__item-title").on("click",function(e){var a=t(this).closest(".row__item");"open"!==a.attr("data-state")?a.attr("data-state","open").siblings("data-state","closed"):a.attr("data-state","closed"),e.preventDefault()}),r.find('a[rel="filter"]').on("click",function(e){var a=t(this),i=a.attr("data-tab");console.log("filter",i),a.addClass("current__filter").siblings().removeClass("current__filter"),r.find("#"+i).attr("data-state","open"),r.find(".tab__wrapper:not(#"+i+")").attr("data-state","closed"),e.preventDefault()}));var P=r.find('[class*="layout__slides"]');P.length>0&&P.each(function(){var e=t(this).attr("id"),a=t("#"+e).find(".slides"),i=t("#"+e).find(".slides__nav"),n=a.find(".slide").length,o={cellSelector:".slide",cellAlign:"left",groupCells:"100%",prevNextButtons:!1,pageDots:!1,wrapAround:!1,adaptiveHeight:!1,on:{ready:function(){},change:function(){a.hasClass("slides_testimonials")&&(0===s.selectedIndex?i.find('a[href="#prev"]').addClass("disabled"):i.find('a[href="#prev"]').removeClass("disabled"),s.selectedIndex===s.slides.length-1?i.find('a[href="#next"]').addClass("disabled"):i.find('a[href="#next"]').removeClass("disabled"))}}};if(n<=1&&i.remove(),!a.hasClass("slides_awards")){i.find("a").on("click",function(e){"#next"===t(this).attr("href")?a.flickity("next",o.wrapAround):a.flickity("previous",o.wrapAround),e.preventDefault()}),a.flickity(o);var s=a.data("flickity")}});var W=r.find(".layout__slides_accordeon");W.length>0&&W.each(function(){var e=t(this).attr("id"),a=t("#"+e).find(".images"),i=(a.length,{cellSelector:"figure",cellAlign:"left",prevNextButtons:!1,pageDots:!1,wrapAround:!1,fade:!0,draggable:!1,adaptiveHeight:!1,on:{ready:function(){},change:function(){}},watchCSS:!0});a.flickity(i),t("#"+e).find("h3").on("mouseover",function(e){if("open"!==t(this).attr("data-state")){var i=t(this).closest(".content__item").index();a.flickity("select",i,!1,!1),t(this).closest(".content__item").attr("data-state","open").siblings().attr("data-state","closed")}e.preventDefault()})});var N=null;(r.find('a[rel="overlay"]').on("click",function(e){var a=t(this).attr("href"),i=t(a),n=(i.attr("data-state"),t(this).attr("data-vid")),o="#audio__overlay"===a,s=t(this).attr("data-provider");if(console.log("vid",n),console.log("audio",o),n)r.attr("data-overlay"),r.attr("data-source",s),console.log("source",s),"wistia"==s&&t.getJSON("https://fast.wistia.net/oembed?url=https%3A%2F%2Fsupport.wistia.com%2Fmedias%2F"+n,function(t){i.find("#video").append(t.html),T(function(){i.attr("data-state","open")}),window._wq=window._wq||[],_wq.push({id:"_all",onReady:function(t){(N=t).play(),N.bind("end",function(){r.find("#video__overlay").attr("data-state","closed"),unload_player(N)})}})}),"vimeo"==s&&(console.log("player",N),N||(N=new Vimeo.Player("video",{id:n,autoplay:!0})).ready().then(function(){T(function(){i.attr("data-state","open"),N.play()})})),"yt"===s&&(r.find("#video").append('<iframe id="yt-video" width="640" height="360"src="https://www.youtube.com/embed/'+n+'?rel=0" frameborder="0" allowfullscreen>'),r.find("#yt-video").load(function(){t(this).hasClass("loaded")||(t(this).addClass("loaded"),t(this)[0].src+="&autoplay=1",T(function(){i.attr("data-state","open")}))}));else if(o){if(t(this).hasClass("close"))console.log("CLOSE AUDIO"),r.find('#audio > [id*="audio"]').remove(),i.attr("data-state","closed"),r.removeAttr("data-overlay");else if(r.attr("data-overlay"),"open"!==i.attr("data-state")){var l=t(this).find('[id*="audio"]').clone(!0);i.find("#audio").append(l),i.attr("data-state","open")}}else{"wistia"==(s=r.attr("data-source"))&&N.remove(),"vimeo"==s?N.destroy():r.find("#yt-video").remove(),N=null,r.find("#video .video__wrapper").remove(),r.find("#video__overlay").attr("data-state","closed"),r.removeAttr("data-overlay"),r.removeAttr("data-source")}e.preventDefault()}),r.find(".layout__faq").length>0)&&r.find('a[rel="filter"]').on("click",function(e){var a=t(this),i=a.attr("data-category");a.addClass("current__filter").siblings().removeClass("current__filter"),"reset"!==i?r.find("#faq__questions .row").each(function(){t(this).attr("data-category")===i?t(this).show():t(this).hide()}):(r.find(".current__filter").removeClass("current__filter"),r.find("#faq__questions .row").show()),e.preventDefault()});var E=r.find(".module__tool-finder .software__list"),L=(E.length,r.find(".module__tool-finder").find(".slides__nav")),j={cellSelector:".software",cellAlign:"center",freeScroll:!1,groupCells:!0,draggable:!0,prevNextButtons:!1,pageDots:!1,wrapAround:!1,watchCSS:!0,adaptiveHeight:!1,on:{ready:function(){},change:J}};L.find("a").on("click",function(e){"#next"===t(this).attr("href")?E.flickity("next",j.wrapAround):E.flickity("previous",j.wrapAround),e.preventDefault()}),E.flickity(j);var B=E.data("flickity");function J(){0===B.selectedIndex?L.find('a[href="#prev"]').addClass("disabled"):L.find('a[href="#prev"]').removeClass("disabled"),B.selectedIndex===B.slides.length-1?L.find('a[href="#next"]').addClass("disabled"):L.find('a[href="#next"]').removeClass("disabled")}L.find("a").on("click",function(e){"#next"===t(this).attr("href")?E.flickity("next",j.wrapAround):E.flickity("previous",j.wrapAround),e.preventDefault()}),r.find('a[rel="audience"]').on("click",function(e){var a=t(this).attr("href").replace("#","");r.find(".module__tool-finder .selector").attr("data-current",a),r.find(".module__tool-finder .software__list .software").each(function(){t(this).hasClass(a)?t(this).attr("data-state","open"):t(this).attr("data-state","closed")}),E.length>0&&(E.flickity("resize"),J()),e.preventDefault()});var R=r.find("#blog__search");r.find('a[rel="overlay-alt"]').on("click",function(e){var a=t(this).attr("href"),i=t(a),n=i.attr("data-state");t(this).attr("data-vid"),t(this).attr("data-provider");"open"===n&&(i.attr("data-state","closed"),r.removeAttr("data-overlay")),e.preventDefault()}),R.length>0&&r.on("focus","#blog__search .facetwp-search",function(){t(this).val()||r.find(".search__result").hide(),r.find("#search__results").attr("data-state","open"),r.find("#search__results .facetwp-search").focus()});var $=r.find(".filter__items");($.on("click",function(){var e=t(this);"open"!==e.attr("data-state")?($.each(function(){t(this).attr("data-state","closed")}),e.attr("data-state","open")):e.attr("data-state","closed")}),o.on("facetwp-loaded",function(){F(".layout",".equal",function(){});var e=r.find(".filter");if(e.length>0){e.each(function(){var e=t(this).find(".checked"),a="";e.length>0&&(e.each(function(){a+=t(this).html()}),t(this).find(".filter__items-title > span").html(a).find("span").remove())});var a=r.find("#resources__filter-current > .wrapper");a.html("");var n=FWP.facets.resources_grade,o=FWP.facets.resources_subject,s=FWP.facets.resources_type,l=FWP.facets.resources_software,d=FWP.facets.partner_region;if(console.log(d),n)for(i=0;i<n.length;i++){var f=r.find('[data-value="'+n[i]+'"]').html();a.append('<a class="filter__clear" href="#" data-facet="resources_grade" data-filter="'+n[i]+'">'+f+"</a>")}if(d)for(i=0;i<d.length;i++){f=r.find('[data-value="'+d[i]+'"]').html();a.append('<a class="filter__clear" href="#" data-facet="partner_region" data-filter="'+d[i]+'">'+f+"</a>")}if(o)for(i=0;i<n.length;i++){f=r.find('[data-value="'+o[i]+'"]').html();a.append('<a class="filter__clear" href="#" data-facet="resources_subject" data-filter="'+o[i]+'">'+f+"</a>")}if(s)for(i=0;i<s.length;i++){f=r.find('[data-value="'+s[i]+'"]').html();a.append('<a class="filter__clear" href="#" data-facet="resources_type" data-filter="'+s[i]+'">'+f+"</a>")}if(l)for(i=0;i<l.length;i++){f=r.find('[data-value="'+l[i]+'"]').html();a.append('<a class="filter__clear" href="#" data-facet="resources_software" data-filter="'+l[i]+'">'+f+"</a>")}r.on("click",".filter__clear",function(e){var a=t(this).attr("data-facet"),i=t(this).attr("data-filter"),n={};n[a]=i,FWP.reset(n),e.preventDefault()})}}),c)&&r.find(".menu-item-has-children").on("click",function(e){"li"===e.target.localName&&("open"===t(this).attr("data-state")?(t(this).attr("data-state","closed"),t(this).find(".sub-menu").attr("data-state","closed")):(t(this).attr("data-state","open"),t(this).find(".sub-menu").attr("data-state","open")),e.preventDefault())});function Q(){F(".module__explore-a-subject",".column > div p",function(){}),F(".layout",".equal",function(){}),F("nav",".equal",function(){})}k&&(links="",r.find("h2").each(function(){var e=t(this).text(),a=e.toLowerCase().replace("?","").replace(/\ /g,"-");t(this).attr("id",a),links=links+'<li class="section___item"><a href="#'+a+'" rel="anchor">'+e+"</a></li>"}),r.find(".section__nav nav").html(links)),o.imagesLoaded(function(){console.log("Images Loaded…"),r.toggleClass("loading loaded")}),n.load(function(){console.log("All Loaded…")}),o.ready(function(){console.log("DOM Ready…"),function(t){if(M(),Q(),z(),T(),C){var e=r.find("#blog__posts .layout__posts > .wrapper .posts");e.infiniteScroll({path:".posts__navigation .posts__load-more",append:".post",loadOnScroll:!1,scrollThreshold:!1,button:".posts__load-more",history:"false"}),e.on("append.infiniteScroll",function(t,e,a,i){F(".layout",".equal",function(){})})}var a=r.find(".layout__case_studies_feed > .wrapper .stories");a.length>0&&(a.infiniteScroll({path:".posts__navigation .posts__load-more",append:".story",loadOnScroll:!1,scrollThreshold:!1,button:".posts__load-more",history:"false"}),a.on("append.infiniteScroll",function(t,e,a,i){F(".layout",".equal",function(){})})),o.trigger("init_complete"),t&&t()}(function(){o.trigger("init_callback_complete")}),h&&s.addClass("ie"),t('a[href*="#"]').not('[href="#"]').not('[href="#0"]').not('[rel="overlay"]').click(function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=t(this.hash);(a=a.length?a:t("[name="+this.hash.slice(1)+"]")).length&&(e.preventDefault(),t("html, body").animate({scrollTop:a.offset().top-100},1e3,function(){}))}}),(m||y)&&(g||w?u=r.find(".nav__software.desktop").length>0?r.find(".nav__software.desktop").offset().top:0:c?p=r.find(".nav__software.mobile").length>0?r.find(".nav__software.mobile").offset().top:0:u=r.find(".nav__software.desktop").length>0?r.find(".nav__software.desktop").offset().top:0),n.on("scroll",function(){l=D(),q(),l>t("header").height()?r.attr("data-menu","fixed"):r.attr("data-menu","closed"),!y&&!m||g||(l>u-t("header").height()?(r.attr("data-menu","fixed"),r.find(".nav__software.desktop").addClass("fixed"),r.find(".action__megamenus").css("top",Math.floor(r.find(".nav__software.desktop").outerHeight()+_))):(r.find(".nav__software.desktop").removeClass("fixed"),r.find(".action__megamenus").css("top",Math.floor(x.outerHeight()+r.find(".nav__software.desktop").outerHeight()+_))),c&&(l>p-t("header").height()?(r.find(".nav__software.mobile").addClass("fixed").css("top",t("header").height()),r.css("paddingTop",r.find(".nav__software.mobile").outerHeight())):(r.find(".nav__software.mobile").removeClass("fixed").css("top",""),r.css("paddingTop","")))),g&&(l>t("header").height()?r.find(".nav__software").addClass("fixed"):r.find(".nav__software").removeClass("fixed")),r.find(".post__categories").length>0&&(l>r.find(".post__categories").offset().top-.33*A()?r.find(".post__social_share").css("opacity",0):r.find(".post__social_share").css("opacity")<1&&r.find(".post__social_share").css("opacity",1))});n.scrollEnd(function(){},250),n.on("resize",function(){S()!==f&&(f=S(),A(),c=H(768),M(),Q(),z())})})});
